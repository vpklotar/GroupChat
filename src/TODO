TODO:
    Implement all old funtionality (work in progress)